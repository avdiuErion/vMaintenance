<div class="container-xl">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-8">
              <h2>Përdoruesit</h2>
            </div>
            <div class="col-sm-4 add-button">
            </div>
          </div>
        </div>
        <table class="table table-striped table-hover table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>Emri i përdoruesit</th>
            </tr>
          </thead>
          <tbody>
            <% data.forEach((element, index)=> { %>
              <tr>
                <th scope="row">
                  <%= index+1 %>
                </th>
                <td>
                  <%= element.username %>
                </td>
                <td>
                  <% if (element.username != 'admin') { %>
                    <a href="#" class="delete delete-link" title="Delete" data-toggle="tooltip"
                    data-id="<%= element._id %>"><i class="material-icons" style="color: red;">&#xE872;</i></a>
                  <% } %>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <script>
    $(document).ready(function () {
      $('.delete-link').click(function (event) {
        event.preventDefault(); // Prevent default link behavior
  
        const itemId = $(this).data('id');
        if (confirm('A jeni i sigurte qe doni ta fshini?')) {
          $.ajax({
            url: `/users/${itemId}`,
            type: 'DELETE',
            success: function () {
              // Reload the page
              window.location.reload();
            },
            error: function (error) {
              console.error(error);
            }
          });
        }
      });
    });
  </script>